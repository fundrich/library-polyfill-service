/* Disable minification (remove `.min` from URL path) for more info */

(function(undefined) {String.prototype.repeat=function(t){"use strict";if(this===undefined||null===this)throw new TypeError(this+" is not an object");if(t<0||t===Infinity)throw new RangeError(t+" is less than zero or equal to infinity");return new Array((parseInt(t,10)||0)+1).join(this)};Number.isNaN=Number.isNaN||function(N){return"number"==typeof N&&isNaN(N)};Object.defineProperty(Array.prototype,"find",{configurable:!0,value:function(t){if(this===undefined||null===this)throw new TypeError(this+" is not an object");if("function"!=typeof t)throw new TypeError(t+" is not a function");for(var n,i=Object(this),e=arguments[1],r=i instanceof String?i.split(""):i,o=Math.max(Math.min(r.length,9007199254740991),0)||0,f=-1;++f<o;)if(f in r&&(n=r[f],t.call(e,n,f,i)))return n},writable:!0});!function(){function e(e){if(null===e||e===undefined)throw new TypeError("Cannot call method on "+e);return Object(e)}Object.defineProperty(Object,"assign",{enumerable:!1,configurable:!0,writable:!0,value:function(n,r){var t=e(n);if(1===arguments.length)return t;var l,o,a,i,u=Array.prototype.slice.call(arguments,1);for(l=0;l<u.length;l++){var c=u[l];for(c===undefined||null===c?a=[]:(i=e(c),a=Object.keys(i)),o=0;o<a.length;o++){var f=a[o],b=Object.getOwnPropertyDescriptor(i,f);if(b!==undefined&&b.enumerable){var d=i[f];t[f]=d}}}return t}})}();!function(e,n,t){var r,o=0,u=""+Math.random(),a="__symbol:",c=a.length,l="__symbol@@"+u,i="defineProperty",f="defineProperties",v="getOwnPropertyNames",s="getOwnPropertyDescriptor",b="propertyIsEnumerable",y=e.prototype,h=y.hasOwnProperty,m=y[b],p=y.toString,w=Array.prototype.concat,g="object"==typeof window?e.getOwnPropertyNames(window):[],d=e[v],P=function(e){if("[object Window]"===p.call(e))try{return d(e)}catch(n){return w.call([],g)}return d(e)},S=e[s],O=e.create,j=e.keys,E=e.freeze||e,_=e[i],k=e[f],N=S(e,v),T=function(e,n,t){if(!h.call(e,l))try{_(e,l,{enumerable:!1,configurable:!1,writable:!1,value:{}})}catch(r){e[l]={}}e[l]["@@"+n]=t},z=function(e,n){var t=O(e);return P(n).forEach(function(e){M.call(n,e)&&G(t,e,n[e])}),t},A=function(e){var n=O(e);return n.enumerable=!1,n},D=function(){},F=function(e){return e!=l&&!h.call(x,e)},I=function(e){return e!=l&&h.call(x,e)},M=function(e){var n=""+e;return I(n)?h.call(this,n)&&this[l]["@@"+n]:m.call(this,e)},W=function(n){var t={enumerable:!1,configurable:!0,get:D,set:function(e){r(this,n,{enumerable:!1,configurable:!0,writable:!0,value:e}),T(this,n,!0)}};try{_(y,n,t)}catch(o){y[n]=t.value}return E(x[n]=_(e(n),"constructor",B))},q=function K(e){if(this instanceof K)throw new TypeError("Symbol is not a constructor");return W(a.concat(e||"",u,++o))},x=O(null),B={value:q},C=function(e){return x[e]},G=function(e,n,t){var o=""+n;return I(o)?(r(e,o,t.enumerable?A(t):t),T(e,o,!!t.enumerable)):_(e,n,t),e},H=function(e){return function(n){return h.call(e,l)&&h.call(e[l],"@@"+n)}},J=function(e){return P(e).filter(e===y?H(e):I).map(C)};N.value=G,_(e,i,N),N.value=J,_(e,"getOwnPropertySymbols",N),N.value=function(e){return P(e).filter(F)},_(e,v,N),N.value=function(e,n){var t=J(n);return t.length?j(n).concat(t).forEach(function(t){M.call(n,t)&&G(e,t,n[t])}):k(e,n),e},_(e,f,N),N.value=M,_(y,b,N),N.value=q,_(t,"Symbol",N),N.value=function(e){var n=a.concat(a,e,u);return n in y?x[n]:W(n)},_(q,"for",N),N.value=function(e){if(F(e))throw new TypeError(e+" is not a symbol");return h.call(x,e)?e.slice(2*c,-u.length):void 0},_(q,"keyFor",N),N.value=function(e,n){var t=S(e,n);return t&&I(n)&&(t.enumerable=M.call(e,n)),t},_(e,s,N),N.value=function(e,n){return 1===arguments.length||void 0===n?O(e):z(e,n)},_(e,"create",N),N.value=function(){var e=p.call(this);return"[object String]"===e&&I(this)?"[object Symbol]":e},_(y,"toString",N),r=function(e,n,t){var r=S(y,n);delete y[n],_(e,n,t),e!==y&&_(y,n,r)}}(Object,0,this);Object.defineProperty(Symbol,"iterator",{value:Symbol("iterator")});Object.defineProperty(Symbol,"toStringTag",{value:Symbol("toStringTag")});var Iterator=function(){var e=function(){return this.length=0,this},t=function(e){if("function"!=typeof e)throw new TypeError(e+" is not a function");return e},_=function(e,n){if(!(this instanceof _))return new _(e,n);Object.defineProperties(this,{__list__:{writable:!0,value:e},__context__:{writable:!0,value:n},__nextIndex__:{writable:!0,value:0}}),n&&(t(n.on),n.on("_add",this._onAdd.bind(this)),n.on("_delete",this._onDelete.bind(this)),n.on("_clear",this._onClear.bind(this)))};return Object.defineProperties(_.prototype,Object.assign({constructor:{value:_,configurable:!0,enumerable:!1,writable:!0},_next:{value:function(){var e;if(this.__list__)return this.__redo__&&(e=this.__redo__.shift())!==undefined?e:this.__nextIndex__<this.__list__.length?this.__nextIndex__++:void this._unBind()},configurable:!0,enumerable:!1,writable:!0},next:{value:function(){return this._createResult(this._next())},configurable:!0,enumerable:!1,writable:!0},_createResult:{value:function(e){return e===undefined?{done:!0,value:undefined}:{done:!1,value:this._resolve(e)}},configurable:!0,enumerable:!1,writable:!0},_resolve:{value:function(e){return this.__list__[e]},configurable:!0,enumerable:!1,writable:!0},_unBind:{value:function(){this.__list__=null,delete this.__redo__,this.__context__&&(this.__context__.off("_add",this._onAdd.bind(this)),this.__context__.off("_delete",this._onDelete.bind(this)),this.__context__.off("_clear",this._onClear.bind(this)),this.__context__=null)},configurable:!0,enumerable:!1,writable:!0},toString:{value:function(){return"[object Iterator]"},configurable:!0,enumerable:!1,writable:!0}},{_onAdd:{value:function(e){if(!(e>=this.__nextIndex__)){if(++this.__nextIndex__,!this.__redo__)return void Object.defineProperty(this,"__redo__",{value:[e],configurable:!0,enumerable:!1,writable:!1});this.__redo__.forEach(function(t,_){t>=e&&(this.__redo__[_]=++t)},this),this.__redo__.push(e)}},configurable:!0,enumerable:!1,writable:!0},_onDelete:{value:function(e){var t;e>=this.__nextIndex__||(--this.__nextIndex__,this.__redo__&&(t=this.__redo__.indexOf(e),-1!==t&&this.__redo__.splice(t,1),this.__redo__.forEach(function(t,_){t>e&&(this.__redo__[_]=--t)},this)))},configurable:!0,enumerable:!1,writable:!0},_onClear:{value:function(){this.__redo__&&e.call(this.__redo__),this.__nextIndex__=0},configurable:!0,enumerable:!1,writable:!0}})),Object.defineProperty(_.prototype,Symbol.iterator,{value:function(){return this},configurable:!0,enumerable:!1,writable:!0}),Object.defineProperty(_.prototype,Symbol.toStringTag,{value:"Iterator",configurable:!1,enumerable:!1,writable:!0}),_}();!function(){if(!Object.setPrototypeOf){var t,e,o=Object.getOwnPropertyNames,r=Object.getOwnPropertyDescriptor,n=Object.create,c=Object.defineProperty,_=Object.getPrototypeOf,f=Object.prototype,O=function(t,e){return o(e).forEach(function(o){c(t,o,r(e,o))}),t},p=function(t,e){return O(n(e),t)};try{t=r(f,"__proto__").set,t.call({},null),e=function(e,o){return t.call(e,o),e}}catch(u){t={__proto__:null},t instanceof Object?e=p:(t.__proto__=f,e=t instanceof Object?function(t,e){return t.__proto__=e,t}:function(t,e){return _(t)?(t.__proto__=e,t):p(t,e)})}Object.setPrototypeOf=e}}();String.prototype.includes=function(t,e){if("object"==typeof t&&t instanceof RegExp)throw new TypeError("First argument to String.prototype.includes must not be a regular expression");return-1!==this.indexOf(t,e)};String.prototype.contains=String.prototype.includes;var ArrayIterator=function(){var e=function(t,r){if(!(this instanceof e))return new e(t,r);Iterator.call(this,t),r=r?String.prototype.contains.call(r,"key+value")?"key+value":String.prototype.contains.call(r,"key")?"key":"value":"value",Object.defineProperty(this,"__kind__",{value:r,configurable:!1,enumerable:!1,writable:!1})};return Object.setPrototypeOf&&Object.setPrototypeOf(e,Iterator.prototype),e.prototype=Object.create(Iterator.prototype,{constructor:{value:e,configurable:!0,enumerable:!1,writable:!0},_resolve:{value:function(e){return"value"===this.__kind__?this.__list__[e]:"key+value"===this.__kind__?[e,this.__list__[e]]:e},configurable:!0,enumerable:!1,writable:!0},toString:{value:function(){return"[object Array Iterator]"},configurable:!0,enumerable:!1,writable:!0}}),e}();Number.isFinite=Number.isFinite||function(i){return"number"==typeof i&&isFinite(i)};!function(){"use strict";function t(t){var e=Number(t);return r(e)*Math.floor(Math.abs(Math.min(Math.max(e||0,0),9007199254740991)))}function r(t){return t>=0?1:-1}function e(t){return"string"==typeof t||"object"==typeof t&&(y?i(t):f.call(t)===l)}function n(t){if(!t)return!1;if("function"!=typeof t&&"object"!=typeof t)return!1;if(y)return s(t);if(b(t))return!1;var r=f.call(t);return r===g||r===d}var o,a,u=Object.prototype.hasOwnProperty,c=String.prototype.valueOf,i=function(t){try{return c.call(t),!0}catch(r){return!1}},f=Object.prototype.toString,l="[object String]",p="function"==typeof Symbol,y=p&&"toStringTag"in Symbol,v=Function.prototype.toString,h=/^\s*class /,b=function(t){try{var r=v.call(t),e=r.replace(/\/\/.*\n/g,""),n=e.replace(/\/\*[.\s\S]*\*\//g,""),o=n.replace(/\n/gm," ").replace(/ {2}/g," ");return h.test(o)}catch(a){return!1}},s=function(t){try{return!b(t)&&(v.call(t),!0)}catch(r){return!1}},g="[object Function]",d="[object GeneratorFunction]",S=Array.isArray,j=function(t){var r,e=!1,n=[];if(t&&"function"==typeof t.next)for(;!e;){if(r=t.next(),!u.call(r,"value")||!u.call(r,"done")){if(!0===r.done){e=!0;break}break}if(!0===r.done){e=!0;break}if(!1!==r.done)break;n.push(r.value)}return!!e&&n},m="function"==typeof Set,w="function"==typeof Map;if(p)o=Symbol.iterator;else{var F;try{F=Function("iterable","var arr = []; for (var value of iterable) arr.push(value); return arr;")}catch(q){}if(function(){try{var t=!1;return F({"@@iterator":function(){return{next:function(){return t=!0,{done:!0,value:undefined}}}}}),t}catch(q){return!1}}())o="@@iterator";else if("function"==typeof Set){var O=new Set;O.add(0);try{1===F(O).length&&(a=F)}catch(q){}}}var D;if(m){var M=Object.getOwnPropertyDescriptor(Set.prototype,"size").get;D=function(t){try{return M.call(t),!0}catch(q){return!1}}}var x;if(w){var A=Object.getOwnPropertyDescriptor(Map.prototype,"size").get;x=function(t){try{return A.call(t),!0}catch(q){return!1}}}var k=m&&Set.prototype.forEach,P=w&&Map.prototype.forEach,E=function(t){var r=[];return u.call(t,o)?t[o]():k&&D(t)?(k.call(t,function(t){r.push(t)}),{next:function(){return 0===r.length?{done:!0}:{value:r.splice(0,1)[0],done:!1}}}):P&&x(t)?(P.call(t,function(t,e){r.push([e,t])}),{next:function(){return 0===r.length?{done:!0}:{value:r.splice(0,1)[0],done:!1}}}):t},T=String.prototype.match,z=function(t){var r=j(E(t));if(!r)if(e(t))r=T.call(t,/[\uD800-\uDBFF][\uDC00-\uDFFF]?|[^\uD800-\uDFFF]|./g)||[];else if(a&&!S(t))try{r=a(t)}catch(q){}return r||t};Object.defineProperty(Array,"from",{configurable:!0,value:function(r){var e=this;if(null===r||void 0===r)throw new TypeError("`Array.from` requires an array-like object, not `null` or `undefined`");var o,a;if("undefined"!=typeof arguments[1]){if(o=arguments[1],!n(o))throw new TypeError("When provided, the second argument to `Array.from` must be a function");arguments.length>2&&(a=arguments[2])}for(var u,c,i=Object(z(r)),f=t(i.length),l=n(e)?Object(new e(f)):new Array(f),p=0;p<f;)u=i[p],c=o?void 0===a?o(u,p):o.apply(a,[u,p]):u,Object.defineProperty(l,p,{configurable:!0,enumerable:!0,value:c,writable:!0}),p+=1;return l.length=f,l},writable:!0})}();Object.entries=function(e){return Object.keys(e).reduce(function(r,t){var n="string"==typeof t&&e.propertyIsEnumerable(t)?[[t,e[t]]]:[];return r.concat(n)},[])};Math.trunc=function(t){return t<0?Math.ceil(t):Math.floor(t)};!function(t){"use strict";function e(t,e,s,n,h){this._internal=new i(t,e,s,n,h)}function i(t,e,i,s,n){this.onStartCallback=e,this.onProgressCallback=i,this.onFinishCallback=s,this.thisArg=n,this.xhr=t,this.state=0,this.charOffset=0,this.offset=0,this.url="",this.withCredentials=!1,this.timeout=0}function s(){this._data={}}function n(){this._listeners=new s}function h(t){d(function(){throw t},0)}function r(t){this.type=t,this.target=undefined}function a(t,e){r.call(this,t),this.data=e.data,this.lastEventId=e.lastEventId}function o(t,e){n.call(this),this.onopen=undefined,this.onmessage=undefined,this.onerror=undefined,this.url="",this.readyState=g,this.withCredentials=!1,this._internal=new u(this,t,e)}function u(t,i,s){this.url=i.toString(),this.readyState=g,this.withCredentials=v&&s!=undefined&&Boolean(s.withCredentials),this.es=t,this.initialRetry=w(1e3,0),this.heartbeatTimeout=w(45e3,0),this.lastEventId="",this.retry=this.initialRetry,this.wasActivity=!1;var n=s!=undefined&&s.Transport!=undefined?s.Transport:m,h=new n;this.transport=new e(h,this.onStart,this.onProgress,this.onFinish,this),this.timeout=0,this.currentState=S,this.dataBuffer=[],this.lastEventIdBuffer="",this.eventTypeBuffer="",this.state=E,this.fieldStart=0,this.valueStart=0,this.es.url=this.url,this.es.readyState=this.readyState,this.es.withCredentials=this.withCredentials,this.onTimeout()}function c(){this.CONNECTING=g,this.OPEN=C,this.CLOSED=x}var d=t.setTimeout,f=t.clearTimeout,l=function(){};e.prototype.open=function(t,e){this._internal.open(t,e)},e.prototype.cancel=function(){this._internal.cancel()},i.prototype.onStart=function(){if(1===this.state){this.state=2;var t=0,e="",i=undefined;if("contentType"in this.xhr)t=200,e="OK",i=this.xhr.contentType;else try{t=this.xhr.status,e=this.xhr.statusText,i=this.xhr.getResponseHeader("Content-Type")}catch(s){t=0,e="",i=undefined}i==undefined&&(i=""),this.onStartCallback.call(this.thisArg,t,e,i)}},i.prototype.onProgress=function(){if(this.onStart(),2===this.state||3===this.state){this.state=3;var t="";try{t=this.xhr.responseText}catch(r){}for(var e=this.charOffset,i=t.length,s=this.offset;s<i;s+=1){var n=t.charCodeAt(s);n!=="\n".charCodeAt(0)&&n!=="\r".charCodeAt(0)||(this.charOffset=s+1)}this.offset=i;var h=t.slice(e,this.charOffset);this.onProgressCallback.call(this.thisArg,h)}},i.prototype.onFinish=function(){this.onProgress(),3===this.state&&(this.state=4,0!==this.timeout&&(f(this.timeout),this.timeout=0),this.onFinishCallback.call(this.thisArg))},i.prototype.onReadyStateChange=function(){this.xhr!=undefined&&(4===this.xhr.readyState?(this.xhr.status,this.onFinish()):3===this.xhr.readyState?this.onProgress():this.xhr.readyState)},i.prototype.onTimeout2=function(){this.timeout=0;var e=/^data\:([^,]*?)(base64)?,([\S]*)$/.exec(this.url),i=e[1],s="base64"===e[2]?t.atob(e[3]):decodeURIComponent(e[3]);1===this.state&&(this.state=2,this.onStartCallback.call(this.thisArg,200,"OK",i)),2!==this.state&&3!==this.state||(this.state=3,this.onProgressCallback.call(this.thisArg,s)),3===this.state&&(this.state=4,this.onFinishCallback.call(this.thisArg))},i.prototype.onTimeout1=function(){this.timeout=0,this.open(this.url,this.withCredentials)},i.prototype.onTimeout0=function(){var t=this;this.timeout=d(function(){t.onTimeout0()},500),3===this.xhr.readyState&&this.onProgress()},i.prototype.handleEvent=function(t){"load"===t.type?this.onFinish():"error"===t.type?this.onFinish():"abort"===t.type?this.onFinish():"progress"===t.type?this.onProgress():"readystatechange"===t.type&&this.onReadyStateChange()},i.prototype.open=function(e,i){this.cancel(),this.url=e,this.withCredentials=i,this.state=1,this.charOffset=0,this.offset=0;var s=this;if(/^data\:([^,]*?)(?:;base64)?,[\S]*$/.exec(e)!=undefined)return void(this.timeout=d(function(){s.onTimeout2()},0));if((!("ontimeout"in this.xhr)||"sendAsBinary"in this.xhr||"mozAnon"in this.xhr)&&t.document!=undefined&&t.document.readyState!=undefined&&"complete"!==t.document.readyState)return void(this.timeout=d(function(){s.onTimeout1()},4));this.xhr.onload=function(t){s.handleEvent({type:"load"})},this.xhr.onerror=function(){s.handleEvent({type:"error"})},this.xhr.onabort=function(){s.handleEvent({type:"abort"})},this.xhr.onprogress=function(){s.handleEvent({type:"progress"})},this.xhr.onreadystatechange=function(){s.handleEvent({type:"readystatechange"})},this.xhr.open("GET",e,!0),this.xhr.withCredentials=i,this.xhr.responseType="text","setRequestHeader"in this.xhr&&this.xhr.setRequestHeader("Accept","text/event-stream");try{this.xhr.send(undefined)}catch(n){throw n}"readyState"in this.xhr&&t.opera!=undefined&&(this.timeout=d(function(){s.onTimeout0()},0))},i.prototype.cancel=function(){0!==this.state&&4!==this.state&&(this.state=4,this.xhr.onload=l,this.xhr.onerror=l,this.xhr.onabort=l,this.xhr.onprogress=l,this.xhr.onreadystatechange=l,this.xhr.abort(),0!==this.timeout&&(f(this.timeout),this.timeout=0),this.onFinishCallback.call(this.thisArg)),this.state=0},s.prototype.get=function(t){return this._data[t+"~"]},s.prototype.set=function(t,e){this._data[t+"~"]=e},s.prototype["delete"]=function(t){delete this._data[t+"~"]},n.prototype.dispatchEvent=function(t){t.target=this;var e=t.type.toString(),i=this._listeners,s=i.get(e);if(s!=undefined)for(var n=s.length,r=undefined,a=0;a<n;a+=1){r=s[a];try{"function"==typeof r.handleEvent?r.handleEvent(t):r.call(this,t)}catch(o){h(o)}}},n.prototype.addEventListener=function(t,e){t=t.toString();var i=this._listeners,s=i.get(t);s==undefined&&(s=[],i.set(t,s));for(var n=s.length;n>=0;n-=1)if(s[n]===e)return;s.push(e)},n.prototype.removeEventListener=function(t,e){t=t.toString();var i=this._listeners,s=i.get(t);if(s!=undefined){for(var n=s.length,h=[],r=0;r<n;r+=1)s[r]!==e&&h.push(s[r]);0===h.length?i["delete"](t):i.set(t,h)}},a.prototype=r.prototype;var p=t.XMLHttpRequest,y=t.XDomainRequest,v=p!=undefined&&(new p).withCredentials!=undefined,m=v||p!=undefined&&y==undefined?p:y,S=-1,g=0,C=1,x=2,E=4,T=/^text\/event\-stream;?(\s*charset\=utf\-8)?$/i,w=function(t,e){var i=t;return i!==i&&(i=e),i<1e3?1e3:i>18e6?18e6:i},b=function(t,e,i){try{"function"==typeof e&&e.call(t,i)}catch(s){h(s)}};u.prototype.onStart=function(t,e,i){if(this.currentState===g)if(i==undefined&&(i=""),200===t&&T.test(i)){this.currentState=C,this.wasActivity=!0,this.retry=this.initialRetry,this.readyState=C,this.es.readyState=C;var s=new r("open");this.es.dispatchEvent(s),b(this.es,this.es.onopen,s)}else if(0!==t){var n="";n=200!==t?"EventSource's response has a status "+t+" "+e.replace(/\s+/g," ")+" that is not 200. Aborting the connection.":"EventSource's response has a Content-Type specifying an unsupported type: "+i.replace(/\s+/g," ")+". Aborting the connection.",h(new Error(n)),this.close();var s=new r("error");this.es.dispatchEvent(s),b(this.es,this.es.onerror,s)}},u.prototype.onProgress=function(t){if(this.currentState===C){var e=t.length;0!==e&&(this.wasActivity=!0);for(var i=0;i<e;i+=1){var s=t.charCodeAt(i);if(3===this.state&&s==="\n".charCodeAt(0))this.state=E;else if(3===this.state&&(this.state=E),s==="\r".charCodeAt(0)||s==="\n".charCodeAt(0)){if(this.state!==E){5===this.state&&(this.valueStart=i+1);var n=t.slice(this.fieldStart,this.valueStart-1),h=t.slice(this.valueStart+(this.valueStart<i&&t.charCodeAt(this.valueStart)===" ".charCodeAt(0)?1:0),i);if("data"===n)this.dataBuffer.push(h);else if("id"===n)this.lastEventIdBuffer=h;else if("event"===n)this.eventTypeBuffer=h;else if("retry"===n)this.initialRetry=w(Number(h),this.initialRetry),this.retry=this.initialRetry;else if("heartbeatTimeout"===n&&(this.heartbeatTimeout=w(Number(h),this.heartbeatTimeout),0!==this.timeout)){f(this.timeout);var r=this;this.timeout=d(function(){r.onTimeout()},this.heartbeatTimeout)}}if(this.state===E){if(0!==this.dataBuffer.length){this.lastEventId=this.lastEventIdBuffer,""===this.eventTypeBuffer&&(this.eventTypeBuffer="message");var o=new a(this.eventTypeBuffer,{data:this.dataBuffer.join("\n"),lastEventId:this.lastEventIdBuffer});if(this.es.dispatchEvent(o),"message"===this.eventTypeBuffer&&b(this.es,this.es.onmessage,o),this.currentState===x)return}this.dataBuffer.length=0,this.eventTypeBuffer=""}this.state=s==="\r".charCodeAt(0)?3:E}else this.state===E&&(this.fieldStart=i,this.state=5),5===this.state?s===":".charCodeAt(0)&&(this.valueStart=i+1,this.state=6):6===this.state&&(this.state=7)}}},u.prototype.onFinish=function(){if(this.currentState===C||this.currentState===g){this.currentState=S,0!==this.timeout&&(f(this.timeout),this.timeout=0),this.retry>16*this.initialRetry&&(this.retry=16*this.initialRetry),this.retry>18e6&&(this.retry=18e6);var t=this;this.timeout=d(function(){t.onTimeout()},this.retry),this.retry=2*this.retry+1,this.readyState=g,this.es.readyState=g;var e=new r("error");this.es.dispatchEvent(e),b(this.es,this.es.onerror,e)}},u.prototype.onTimeout=function(){if(this.timeout=0,this.currentState===S){this.wasActivity=!1;var t=this;this.timeout=d(function(){t.onTimeout()},this.heartbeatTimeout),this.currentState=g,this.dataBuffer.length=0,this.eventTypeBuffer="",this.lastEventIdBuffer=this.lastEventId,this.fieldStart=0,this.valueStart=0,this.state=E;var e=this.url.slice(0,5);e="data:"!==e&&"blob:"!==e?this.url+(-1===this.url.indexOf("?",0)?"?":"&")+"lastEventId="+encodeURIComponent(this.lastEventId)+"&r="+(Math.random()+1).toString().slice(2):this.url;try{this.transport.open(e,this.withCredentials)}catch(i){throw this.close(),i}}else if(this.wasActivity){this.wasActivity=!1;var t=this;this.timeout=d(function(){t.onTimeout()},this.heartbeatTimeout)}else h(new Error("No activity within "+this.heartbeatTimeout+" milliseconds. Reconnecting.")),this.transport.cancel()},u.prototype.close=function(){this.currentState=x,this.transport.cancel(),0!==this.timeout&&(f(this.timeout),this.timeout=0),this.readyState=x,this.es.readyState=x},c.prototype=n.prototype,o.prototype=new c,o.prototype.close=function(){this._internal.close()},c.call(o),v&&(o.prototype.withCredentials=undefined);m!=undefined&&(t.EventSource==undefined||v&&!function(){return t.EventSource!=undefined&&"withCredentials"in t.EventSource.prototype}())&&(t.NativeEventSource=t.EventSource,t.EventSource=o)}("undefined"!=typeof window?window:this);}).call('object' === typeof window && window || 'object' === typeof self && self || 'object' === typeof global && global || {});